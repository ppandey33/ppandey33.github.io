<style>
  :root {
    --spiral-duration: 3.5s;
    --blink-duration: 1s;
    --pause-duration: 0.5s;
    --total-duration: calc(var(--spiral-duration) + var(--blink-duration) + var(--pause-duration));
  }
  .spiral-container {
    display: flex;
    gap: var(--gap-md, 1rem);
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: fixed;
    height: 100vh;
    width: 100vw;
    margin: 0;
    margin: 0;
    top: 0;
    left: 0;
    background: var(--background-20, rgba(26, 26, 26, 0.2));
    backdrop-filter: blur(var(--space-1, 0.25rem));
    -webkit-backdrop-filter: blur(var(--space-1, 0.25rem));
    filter: blur(0);
    z-index: calc(var(--z-modal, 10000) + 1);
  }

  .spiral-grid circle {
    opacity: 0;
    transform-origin: center;
    animation: spiralInfinite var(--total-duration) ease-in-out infinite;
  }

  @keyframes spiralInfinite {
    0% {
      opacity: 0;
      transform: scale(0.4);
    }
    10% {
      opacity: 1;
      transform: scale(1);
    }
    70% {
      opacity: 1;
      transform: scale(1);
    }
    75% {
      opacity: 1;
      transform: scale(1);
    }
    82.5% {
      opacity: 0;
      transform: scale(0.8);
    }
    90%,
    100% {
      opacity: 0;
      transform: scale(0.4);
    }
  }

  .msg-rotate {
    min-width: 25rch;
  }

  .msg-rotate span {
    position: absolute;
    opacity: 0;
    transform: translateY(-20px);
    animation: matrixDrop 10s infinite;
    color: var(--primary, #ffffff);
    font-size: var(--fontSize-base, 1rem);
  }

  .msg-rotate span:nth-child(1) {
    animation-delay: 0s;
  }

  .msg-rotate span:nth-child(2) {
    animation-delay: 2s;
  }

  .msg-rotate span:nth-child(3) {
    animation-delay: 4s;
  }

  .msg-rotate span:nth-child(4) {
    animation-delay: 6s;
  }
  
  .msg-rotate span:nth-child(5) {
    animation-delay: 8s;
  }

  @keyframes matrixDrop {
    0% {
      opacity: 0;
      transform: translateY(-20px);
    }
    10% {
      opacity: 1;
      transform: translateY(0);
    }
    20% {
      opacity: 1;
    }
    35% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 0;
    }
  }
</style>
<div class="spiral-container" data-app-loader>
  {% assign size = include.size | default: 7 %}
  <!---->
  {% assign gap = include.gap | default: 8 %}
  <!---->
  {% assign radius = include.radius | default: 2 %}
  <!---->
  {% assign color = include.color | default: "var(--primary, #ffffff)" %}
  <!---->
  {% assign speed = include.speed | default: 0.07 %}
  <!---->
  {% assign svg_class = include.svg_class | default: "spiral-grid" %}

  <!---->
  {% assign side = size | times: gap %}
  <!---->
  {% assign coords = "" | split: "" %}

  <!---->
  {% assign top = 0 %}
  <!---->
  {% assign left = 0 %}
  <!---->
  {% assign bottom = size | minus: 1 %}
  <!---->
  {% assign right = size | minus: 1 %}

  <!---->
  {% assign max_iterations = size | times: size %}

  <!---->
  {% for iteration in (1..max_iterations) %}
  <!---->
  {% if top > bottom or left > right %}
  <!---->
  {% break %}
  <!---->
  {% endif %}
  <!---->

  <!---->
  {% comment %} RIGHT: Move along top row {% endcomment %}
  <!---->
  {% for col in (left..right) %}
  <!---->
  {% assign coord = top | append: "," | append: col %}
  <!---->
  {% assign coords = coords | push: coord %}
  <!---->
  {% endfor %}
  <!---->
  {% assign top = top | plus: 1 %}
  <!---->

  <!---->
  {% if top > bottom or left > right %}
  <!---->
  {% break %}
  <!---->
  {% endif %}
  <!---->

  <!---->
  {% comment %} DOWN: Move along right column {% endcomment %}
  <!---->
  {% for row in (top..bottom) %}
  <!---->
  {% assign coord = row | append: "," | append: right %}
  <!---->
  {% assign coords = coords | push: coord %}
  <!---->
  {% endfor %}
  <!---->
  {% assign right = right | minus: 1 %}
  <!---->

  <!---->
  {% if top > bottom or left > right %}
  <!---->
  {% break %}
  <!---->
  {% endif %}
  <!---->

  <!---->
  {% comment %} LEFT: Move along bottom row {% endcomment %}
  <!---->
  {% for col in (left..right) reversed %}
  <!---->
  {% assign coord = bottom | append: "," | append: col %}
  <!---->
  {% assign coords = coords | push: coord %}
  <!---->
  {% endfor %}
  <!---->
  {% assign bottom = bottom | minus: 1 %}
  <!---->

  <!---->
  {% if top > bottom or left > right %}
  <!---->
  {% break %}
  <!---->
  {% endif %}
  <!---->

  <!---->
  {% comment %} UP: Move along left column {% endcomment %}
  <!---->
  {% for row in (top..bottom) reversed %}
  <!---->
  {% assign coord = row | append: "," | append: left %}
  <!---->
  {% assign coords = coords | push: coord %}
  <!---->
  {% endfor %}
  <!---->
  {% assign left = left | plus: 1 %}
  <!---->
  {% endfor %}

  <svg xmlns="http://www.w3.org/2000/svg" width="{{ side }}" height="{{ side }}" class="{{ svg_class }}" viewBox="0 0 {{ side }} {{ side }}">
    <!---->
    {% for coord in coords %}
    <!---->
    {% assign parts = coord | split: "," %}
    <!---->
    {% assign row = parts[0] | times: 1 %}
    <!---->
    {% assign col = parts[1] | times: 1 %}
    <!---->
    {% assign cx = col | times: gap %}
    <!---->
    {% assign cy = row | times: gap %}
    <!---->
    {% assign delay = forloop.index0 | times: speed %}
    <circle cx="{{ cx }}" cy="{{ cy }}" r="{{ radius }}" fill="{{ color }}" style="animation-delay: {{ delay }}s" />
    <!---->
    {% endfor %}
  </svg>
  <div class="msg-rotate">
    <span>✴ Summoning pixels…</span>
    <span>✨︎ Charging creativity…</span>
    <span>⎘ Stirring the code cauldron…</span>
    <span>⚙︎ Polishing the interface…</span>
    <span>⌬ Unfolding the universe…</span>
  </div>
</div>
